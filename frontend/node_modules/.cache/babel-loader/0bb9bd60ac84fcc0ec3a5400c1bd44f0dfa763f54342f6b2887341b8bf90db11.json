{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import{FaUser}from\"react-icons/fa\";import{useSelector,useDispatch}from\"react-redux\";import{userRegThunk}from\"../redux/auth/authSlice\";import{authActions}from\"../redux/auth/authSlice\";// import { register, reset } from '../features/auth/authSlice'\n// import Spinner from '../components/Spinner'\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){const dispatch=useDispatch();const navigate=useNavigate();const[formData,setFormData]=useState({name:\"\",email:\"\",password:\"\",password2:\"\"});const{name,email,password,password2}=formData;const{user,isError,isSuccess,isLoading,message}=useSelector(state=>state.auth);useEffect(()=>{if(isError){toast.error(message);}// Redirect when logged in\nif(isSuccess||user){navigate(\"/\");}dispatch(authActions.reset());},[isError,isSuccess,user,message,navigate,dispatch]);const onChange=e=>{setFormData(prevState=>({...prevState,[e.target.name]:e.target.value}));};const onSubmit=e=>{e.preventDefault();if(password!==password2){toast.error(\"Passwords do not match\");}else{const userData={name,email,password};dispatch(userRegThunk(userData));}};// if (isLoading) {\n//   return <Spinner />;\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"heading\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(FaUser,{}),\" Register\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Please create an account\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:name,onChange:onChange,placeholder:\"Enter your name\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:email,onChange:onChange,placeholder:\"Enter your email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,onChange:onChange,placeholder:\"Enter password\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password2\",name:\"password2\",value:password2,onChange:onChange,placeholder:\"Confirm password\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-block\",children:\"Submit\"})})]})})]});}export default Register;","map":{"version":3,"names":["useState","useEffect","useNavigate","toast","FaUser","useSelector","useDispatch","userRegThunk","authActions","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","dispatch","navigate","formData","setFormData","name","email","password","password2","user","isError","isSuccess","isLoading","message","state","auth","error","reset","onChange","e","prevState","target","value","onSubmit","preventDefault","userData","children","className","type","id","placeholder","required"],"sources":["C:/Users/jsasi/Desktop/Mern/supportdesk/frontend/src/routes/Register.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FaUser } from \"react-icons/fa\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { userRegThunk } from \"../redux/auth/authSlice\";\r\nimport { authActions } from \"../redux/auth/authSlice\";\r\n// import { register, reset } from '../features/auth/authSlice'\r\n// import Spinner from '../components/Spinner'\r\n\r\nfunction Register() {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    password2: \"\",\r\n  });\r\n\r\n  const { name, email, password, password2 } = formData;\r\n  const { user, isError, isSuccess, isLoading, message } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isError) {\r\n      toast.error(message);\r\n    }\r\n\r\n    // Redirect when logged in\r\n    if (isSuccess || user) {\r\n      navigate(\"/\");\r\n    }\r\n\r\n    dispatch(authActions.reset());\r\n  }, [isError, isSuccess, user, message, navigate, dispatch]);\r\n\r\n  const onChange = (e) => {\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (password !== password2) {\r\n      toast.error(\"Passwords do not match\");\r\n    } else {\r\n      const userData = {\r\n        name,\r\n        email,\r\n        password,\r\n      };\r\n\r\n      dispatch(userRegThunk(userData));\r\n    }\r\n  };\r\n\r\n  // if (isLoading) {\r\n  //   return <Spinner />;\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <section className=\"heading\">\r\n        <h1>\r\n          <FaUser /> Register\r\n        </h1>\r\n        <p>Please create an account</p>\r\n      </section>\r\n\r\n      <section className=\"form\">\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              id=\"name\"\r\n              name=\"name\"\r\n              value={name}\r\n              onChange={onChange}\r\n              placeholder=\"Enter your name\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={onChange}\r\n              placeholder=\"Enter your email\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={onChange}\r\n              placeholder=\"Enter password\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password2\"\r\n              name=\"password2\"\r\n              value={password2}\r\n              onChange={onChange}\r\n              placeholder=\"Confirm password\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <button className=\"btn btn-block\">Submit</button>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}