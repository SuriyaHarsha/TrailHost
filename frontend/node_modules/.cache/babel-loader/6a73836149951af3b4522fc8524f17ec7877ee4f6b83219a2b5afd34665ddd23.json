{"ast":null,"code":"import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import{FaSignInAlt}from\"react-icons/fa\";import{useSelector,useDispatch}from\"react-redux\";import{userLoginThunk}from\"../redux/auth/authSlice\";import{authActions}from\"../redux/auth/authSlice\";// import Spinner from '../components/Spinner'\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){const[formData,setFormData]=useState({email:\"\",password:\"\"});const{email,password}=formData;const dispatch=useDispatch();const navigate=useNavigate();const{user,isError,isSuccess,isLoading,message}=useSelector(state=>state.auth);useEffect(()=>{if(isError){toast.error(message);}// Redirect when logged in\nif(isSuccess||user){navigate(\"/\");}dispatch(authActions.reset());},[isError,isSuccess,user,message,navigate,dispatch]);const onChange=e=>{setFormData(prevState=>({...prevState,[e.target.name]:e.target.value}));};const onSubmit=e=>{e.preventDefault();dispatch(userLoginThunk(formData));};// if (isLoading) {\n//   return <Spinner />;\n// }\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"heading\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(FaSignInAlt,{}),\" Login\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Please Login to get support !\"})]}),/*#__PURE__*/_jsx(\"section\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",name:\"email\",value:email,onChange:onChange,placeholder:\"Enter your email\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",name:\"password\",value:password,onChange:onChange,placeholder:\"Enter password\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-block\",children:\"Login\"})})]})})]});}export default Login;","map":{"version":3,"names":["useState","useEffect","useNavigate","toast","FaSignInAlt","useSelector","useDispatch","userLoginThunk","authActions","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","formData","setFormData","email","password","dispatch","navigate","user","isError","isSuccess","isLoading","message","state","auth","error","reset","onChange","e","prevState","target","name","value","onSubmit","preventDefault","children","className","type","id","placeholder","required"],"sources":["C:/Users/jsasi/Desktop/Mern/supportdesk/frontend/src/routes/Login.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { FaSignInAlt } from \"react-icons/fa\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { userLoginThunk } from \"../redux/auth/authSlice\";\r\nimport { authActions } from \"../redux/auth/authSlice\";\r\n// import Spinner from '../components/Spinner'\r\n\r\nfunction Login() {\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const { email, password } = formData;\r\n\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const { user, isError, isSuccess, isLoading, message } = useSelector(\r\n    (state) => state.auth\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isError) {\r\n      toast.error(message);\r\n    }\r\n\r\n    // Redirect when logged in\r\n    if (isSuccess || user) {\r\n      navigate(\"/\");\r\n    }\r\n\r\n    dispatch(authActions.reset());\r\n  }, [isError, isSuccess, user, message, navigate, dispatch]);\r\n\r\n  const onChange = (e) => {\r\n    setFormData((prevState) => ({\r\n      ...prevState,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    dispatch(userLoginThunk(formData));\r\n  };\r\n\r\n  // if (isLoading) {\r\n  //   return <Spinner />;\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <section className=\"heading\">\r\n        <h1>\r\n          <FaSignInAlt /> Login\r\n        </h1>\r\n        <p>Please Login to get support !</p>\r\n      </section>\r\n\r\n      <section className=\"form\">\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"email\"\r\n              className=\"form-control\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={onChange}\r\n              placeholder=\"Enter your email\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"form-control\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={onChange}\r\n              placeholder=\"Enter password\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <button className=\"btn btn-block\">Login</button>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}